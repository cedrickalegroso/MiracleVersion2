JAM.Notify={}local a=JAM.Notify;a.ESX=JAM.ESX;a.SpriteYSize=0.038;a.SpriteYOffset=-0.017;a.StdMsgTimeout=10;a.TemplateXPos=0.5;a.TemplateYPos=0.02;a.TemplateFont=4;function a:Start()if not self then return end;while not ESX do Citizen.Wait(100)end;self.ESX=ESX;while not ESX.IsPlayerLoaded()do Citizen.Wait(100)end;print("JAM_Notify:Start() - Successful")self.Started=1 end;function a:DoNotify(b,c)if not self.Started then return end;Citizen.CreateThread(function(...)if not self or not b then return end;if type(b)~="string"then b=tostring(b)end;if string.len(b)<1 then return end;if c and type(c)~="number"then c=tonumber(c)end;if not c then c=self.StdMsgTimeout end;if not self.DrawnTemplate then self.DrawnTemplate=self:DrawTextTemplate()end;self.DrawnTemplate.font=self.TemplateFont;self.DrawnTemplate.x=self.TemplateXPos;self.DrawnTemplate.y=self.TemplateYPos;self.DrawnTemplate.text=b;self.SpriteXSize=string.len(b)/200;if self.ShowingMsg then self.Timer=GetGameTimer()+c*1000 else self.ShowingMsg=true;self.Timer=GetGameTimer()while GetGameTimer()-c*1000<self.Timer do Citizen.Wait(0)self:DrawText(self.DrawnTemplate)DrawSprite("commonmenu","gradient_nav",self.DrawnTemplate.x,self.DrawnTemplate.y-self.SpriteYOffset,self.SpriteXSize,self.SpriteYSize,0.0,0,0,0,225)end;self.ShowingMsg=false end end)end;function a:DrawTextTemplate(d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A)return{text="",x=-1,y=-1,font=g or 6,scale1=h or 0.5,scale2=i or 0.5,colour1=j or 255,colour2=k or 255,colour3=l or 255,colour4=m or 255,wrap1=n or 0.0,wrap2=o or 1.0,centre=type(p)~="boolean"and true or p,outline=q or 1,dropshadow1=r or 2,dropshadow2=s or 0,dropshadow3=t or 0,dropshadow4=u or 0,dropshadow5=v or 0,edge1=w or 255,edge2=x or 255,edge3=y or 255,edge4=z or 255,edge5=A or 255}end;function a:DrawText(B)if not B or not B.text or B.text==""or B.x==-1 or B.y==-1 then return false end;SetTextFont(B.font)SetTextScale(B.scale1,B.scale2)SetTextColour(B.colour1,B.colour2,B.colour3,B.colour4)SetTextWrap(B.wrap1,B.wrap2)SetTextCentre(B.centre)SetTextOutline(B.outline)SetTextDropshadow(B.dropshadow1,B.dropshadow2,B.dropshadow3,B.dropshadow4,B.dropshadow5)SetTextEdge(B.edge1,B.edge2,B.edge3,B.edge4,B.edge5)SetTextEntry("STRING")AddTextComponentSubstringPlayerName(B.text)DrawText(B.x,B.y)return true end;RegisterNetEvent('JAM_Notify:ShowNotification')AddEventHandler('JAM_Notify:ShowNotification',function(b,c)a:DoNotify(b,c)end)Citizen.CreateThread(function(...)a:Start(...)end)
